{"version":3,"sources":["services/api-service.js","components/images-markup.js","index.js"],"names":["ImageApiService","constructor","searchQuery","page","fetchImages","queryParams","URLSearchParams","key","q","image_type","orientation","safesearch","per_page","fetch","BASE_URL","then","response","json","data","console","log","incrementPage","hits","query","newQuery","resetPage","makeImagesMarkup","images","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","poster","join","refs","form","document","querySelector","searchBtn","gallery","loadMoreBtn","imageApiService","onSearch","e","preventDefault","currentTarget","elements","value","clearGallery","alert","length","renderImages","classList","remove","catch","err","handleError","markup","insertAdjacentHTML","innerHTML","onLoadMore","addEventListener"],"mappings":";;;AAAqC,aAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAtB,MAAMA,EAGnBC,cAFW,EAAA,KAAA,WAAA,4BAGJC,KAAAA,YAAc,GACdC,KAAAA,KAAO,EAGdC,cAEQC,MAAAA,EAAc,IAAIC,gBAAgB,CACtCC,IAAK,qCACLC,EAAG,KAAKN,YACRO,WAAY,QACZC,YAAa,aACbC,YAAY,EACZR,KAAM,KAAKA,KACXS,SAAU,IAGLC,OAAAA,SAAS,KAAKC,YAAYT,KAC9BU,KAAKC,GAAYA,EAASC,OACxBF,KAAKG,IACJC,QAAQC,IAAIF,GACPG,KAAAA,gBAEEH,EAAKI,QAIhBC,YACK,OAAA,KAAKrB,YAGVqB,UAAMC,GACHtB,KAAAA,YAAcsB,EAGrBH,gBACOlB,KAAAA,MAAQ,EAGfsB,YACOtB,KAAAA,KAAO,GA3CqB,QAAA,QAAA;;;;ACsCpC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EArCD,IAAA,EAAA,EAAA,QAAA,kCAqCC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAtCcuB,IAAAA,EAAAA,EAGf,SAASA,EAAiBC,GAEjBA,OAAAA,EACLC,IAAI,EACFC,aAAAA,EACAC,cAAAA,EACAC,KAAAA,EACAC,MAAAA,EACAC,MAAAA,EACAC,SAAAA,EACAC,UAAAA,MAEIC,IAAAA,EAASP,EAIL,OAHJA,IACFO,EAASP,gDAGCO,WAAgBL,uHAGXC,gFAGAC,mFAGGC,oFAGCC,sDAKtBE,KAAK,IACT,QAAA,QAAA;;ACmBA,aAzDD,QAAA,oBACA,IAAA,EAAA,EAAA,QAAA,2BACA,EAAA,EAAA,QAAA,+BAuDC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GArDD,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,UAAWF,SAASC,cAAc,yBAClCE,QAASH,SAASC,cAAc,YAChCG,YAAaJ,SAASC,cAAc,eAEhCI,EAAkB,IAAI7C,EAAJ,QAKxB,SAAS8C,EAAUC,GAQbF,GAPJE,EAAEC,iBAEFH,EAAgBtB,MAAQwB,EAAEE,cAAcC,SAAShD,YAAYiD,MAE7DN,EAAgBpB,YAChB2B,IAE8B,KAA1BP,EAAgBtB,MACX8B,OAAAA,MAAO,iBAGhBR,EAAgBzC,cACbW,KAAKO,IACAA,GAAgB,IAAhBA,EAAKgC,OACAD,OAAAA,MAAO,uBAEdE,EAAajC,GACbgB,EAAKM,YAAYY,UAAUC,OAAO,eAErCC,MAAMC,GAAOC,EAAYD,IAG9B,SAASJ,EAAcjC,GACfuC,MAAAA,GAAS,EAAiBvC,EAAAA,SAAAA,GAChCgB,EAAKK,QAAQmB,mBAAmB,YAAaD,GAG/C,SAASD,EAAaD,GACpBrB,EAAKK,QAAQoB,UAAY,GAG3B,SAASC,EAAWjB,GAClBF,EAAgBzC,cACbW,KAAKO,IACJiC,EAAajC,GACbgB,EAAKM,YAAYY,UAAUC,OAAO,eAIxC,SAASL,IACPd,EAAKK,QAAQoB,UAAY,GA5C3BzB,EAAKC,KAAK0B,iBAAiB,SAAUnB,GACrCR,EAAKM,YAAYqB,iBAAiB,QAASD","file":"src.60c3c903.js","sourceRoot":"../src","sourcesContent":["export default class ImageApiService {\r\n  BASE_URL = 'https://pixabay.com/api/';\r\n\r\n  constructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n  }\r\n    \r\n  fetchImages() {\r\n    // console.log(this);\r\n    const queryParams = new URLSearchParams({\r\n      key: '25731511-e5f7726e83d52bf5fe5f97cfd',\r\n      q: this.searchQuery,\r\n      image_type: 'photo',\r\n      orientation: 'horizontal',\r\n      safesearch: true,\r\n      page: this.page,\r\n      per_page: 6,\r\n    })\r\n\r\n    return fetch(`${this.BASE_URL}?${queryParams}`)\r\n      .then(response => response.json()\r\n        .then(data => {\r\n          console.log(data);\r\n          this.incrementPage();\r\n\r\n          return data.hits;\r\n      }))\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n}","export default makeImagesMarkup;\r\nimport emptyImg from '../images/image-not-found.jpg';\r\n\r\nfunction makeImagesMarkup(images) {\r\n\r\n  return images.\r\n    map(({\r\n      webformatURL,\r\n      largeImageURL,\r\n      tags,\r\n      likes,\r\n      views,\r\n      comments,\r\n      downloads\r\n    }) => {\r\n      let poster = webformatURL;\r\n      if (webformatURL) {\r\n        poster = webformatURL;\r\n      }\r\n      return `<div class=\"photo-card\">\r\n      <img src=\"${poster}\" alt=\"${tags}\" loading=\"lazy\" width=\"150\" />\r\n        <div class=\"info\">\r\n          <p class=\"info-item\">\r\n            <b>Likes ${likes}</b>\r\n          </p>\r\n          <p class=\"info-item\">\r\n            <b>Views ${views}</b>\r\n          </p>\r\n          <p class=\"info-item\">\r\n            <b>Comments ${comments}</b>\r\n          </p>\r\n          <p class=\"info-item\">\r\n            <b>Downloads ${downloads}</b>\r\n          </p>\r\n        </div>\r\n    </div>`\r\n    })\r\n    .join('');\r\n}","import './sass/main.scss';\r\nimport ImageApiService from './services/api-service';\r\nimport makeImagesMarkup from './components/images-markup'\r\n\r\nconst refs = {\r\n  form: document.querySelector('#search-form'),\r\n  searchBtn: document.querySelector('button[type=\"submit\"]'),\r\n  gallery: document.querySelector('.gallery'),\r\n  loadMoreBtn: document.querySelector('.load-more')\r\n}\r\nconst imageApiService = new ImageApiService();\r\n\r\nrefs.form.addEventListener('submit', onSearch);\r\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\r\n\r\nfunction onSearch (e) {\r\n  e.preventDefault();\r\n\r\n  imageApiService.query = e.currentTarget.elements.searchQuery.value;\r\n  \r\n  imageApiService.resetPage();\r\n  clearGallery();\r\n\r\n  if (imageApiService.query === '') {\r\n    return alert ('Пустая строка');\r\n  }\r\n\r\n  imageApiService.fetchImages()\r\n    .then(hits => {\r\n      if (hits.length === 0) {\r\n        return alert ('Неправильный запрос');\r\n      }\r\n        renderImages(hits);\r\n        refs.loadMoreBtn.classList.remove('is-hidden');\r\n      })\r\n    .catch(err => handleError(err));\r\n}\r\n\r\nfunction renderImages (hits) {\r\n  const markup = makeImagesMarkup(hits);\r\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\r\n}\r\n\r\nfunction handleError (err) {\r\n  refs.gallery.innerHTML = '';\r\n}\r\n\r\nfunction onLoadMore(e) {\r\n  imageApiService.fetchImages()\r\n    .then(hits => {\r\n      renderImages(hits);\r\n      refs.loadMoreBtn.classList.remove('is-hidden');\r\n    });\r\n}\r\n\r\nfunction clearGallery() {\r\n  refs.gallery.innerHTML = '';\r\n}"]}